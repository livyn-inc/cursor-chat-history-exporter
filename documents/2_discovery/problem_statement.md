# 02 発見: 課題定義（Problem Statement）

## 1. 課題の概要
Cursor のチャット履歴は GUI でのエクスポートは可能だが、公式のCLI/APIがなく自動化が困難。履歴を系統立てて保存・検索・再利用（監査・開発ナレッジ・教育・計測）する仕組みが不足している。

## 2. 背景 / 影響
- 履歴の散在により、過去の意思決定や資産（回答・設計・コード）の再利用率が低下。
- 監査/証跡が必要な場面で、根拠集約にコストがかかる。
- 大量履歴（>1000件）を対象とする場合、手作業では現実的でない。

## 3. 目標 / 期待成果
- ローカルDB（state.vscdb）からの安定抽出・YAML化（Lint準拠）。
- Flow 配下への日付整理と `latest_chat.yaml` による即時参照性。
- バッチ処理・再開点（manifest）により大規模履歴でも安全実行。
- 指定日/複数日の再生成によりメンテナンス容易化。

## 4. スコープ / 非スコープ
- 含む: 抽出・整形（スピーカ付与/連結/サニタイズ）、Flow移動・集約、日付再生成。
- 含まない: クラウド同期UI、全文検索SaaS連携、アノテーションUI。

## 5. アプローチ
- Dev スクリプトを実装:
  - `export_cursor_history.py`: バッチ/再開対応のYAMLエクスポータ
  - `move_and_organize_chats.py`: Flowへの移動＋`chats/`集約
  - `update_latest_chat_per_date.py`: 指定日の再生成
  - `update_latest_chats_for_dates.py`: 複数日の再生成
- YAML仕様: block scalar、ゼロ幅/BOM除去、タブ→スペース、連続同一ロール結合、空メッセージ除外、コード/Markdown保持。

## 6. 成功条件
- Lintエラー0での大規模履歴変換完了。
- 各日付フォルダに `latest_chat.yaml` が生成され、最新スレッドを参照。
- 1クリック/1コマンドで日付単位の再生成が可能。

## 7. 次のアクション
- Docs（本ファイル・憲章）をリポジトリに同梱して公開準備。
- バックアップ/同期（GitHub）運用ルール整備。
- 必要に応じてメタ情報（タグ/ラベル/プロジェクト紐付け）の拡張を検討。
